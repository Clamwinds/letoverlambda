{"version":3,"sources":["get_more_command.js"],"names":[],"mappings":"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","file":"get_more_command-compiled.js","sourcesContent":["var BaseCommand = require('./base_command').BaseCommand,\n  inherits = require('util').inherits,\n  binaryutils = require('../utils');\n\n/**\n  Get More Document Command\n**/\nvar GetMoreCommand = exports.GetMoreCommand = function(db, collectionName, numberToReturn, cursorId) {\n  BaseCommand.call(this);\n\n  this.collectionName = collectionName;\n  this.numberToReturn = numberToReturn;\n  this.cursorId = cursorId;\n  this.db = db;\n};\n\ninherits(GetMoreCommand, BaseCommand);\n\nGetMoreCommand.OP_GET_MORE = 2005;\n\nGetMoreCommand.prototype.toBinary = function() {\n  // Validate that we are not passing 0x00 in the colletion name\n  if(!!~this.collectionName.indexOf(\"\\x00\")) {\n    throw new Error(\"namespace cannot contain a null character\");\n  }\n\n  // Calculate total length of the document\n  var totalLengthOfCommand = 4 + Buffer.byteLength(this.collectionName) + 1 + 4 + 8 + (4 * 4);\n  // Let's build the single pass buffer command\n  var _index = 0;\n  var _command = new Buffer(totalLengthOfCommand);\n  // Write the header information to the buffer\n  _command[_index++] = totalLengthOfCommand & 0xff;\n  _command[_index++] = (totalLengthOfCommand >> 8) & 0xff;\n  _command[_index++] = (totalLengthOfCommand >> 16) & 0xff;\n  _command[_index++] = (totalLengthOfCommand >> 24) & 0xff;     \n\n  // Write the request ID\n  _command[_index++] = this.requestId & 0xff;\n  _command[_index++] = (this.requestId >> 8) & 0xff;\n  _command[_index++] = (this.requestId >> 16) & 0xff;\n  _command[_index++] = (this.requestId >> 24) & 0xff;     \n\n  // Write zero\n  _command[_index++] = 0;\n  _command[_index++] = 0;\n  _command[_index++] = 0;\n  _command[_index++] = 0;\n\n  // Write the op_code for the command\n  _command[_index++] = GetMoreCommand.OP_GET_MORE & 0xff;\n  _command[_index++] = (GetMoreCommand.OP_GET_MORE >> 8) & 0xff;\n  _command[_index++] = (GetMoreCommand.OP_GET_MORE >> 16) & 0xff;\n  _command[_index++] = (GetMoreCommand.OP_GET_MORE >> 24) & 0xff;     \n\n  // Write zero\n  _command[_index++] = 0;\n  _command[_index++] = 0;\n  _command[_index++] = 0;\n  _command[_index++] = 0;\n\n  // Write the collection name to the command\n  _index = _index + _command.write(this.collectionName, _index, 'utf8') + 1;\n  _command[_index - 1] = 0;    \n\n  // Number of documents to return\n  _command[_index++] = this.numberToReturn & 0xff;\n  _command[_index++] = (this.numberToReturn >> 8) & 0xff;\n  _command[_index++] = (this.numberToReturn >> 16) & 0xff;\n  _command[_index++] = (this.numberToReturn >> 24) & 0xff;     \n  \n  // Encode the cursor id\n  var low_bits = this.cursorId.getLowBits();\n  // Encode low bits\n  _command[_index++] = low_bits & 0xff;\n  _command[_index++] = (low_bits >> 8) & 0xff;\n  _command[_index++] = (low_bits >> 16) & 0xff;\n  _command[_index++] = (low_bits >> 24) & 0xff;     \n  \n  var high_bits = this.cursorId.getHighBits();\n  // Encode high bits\n  _command[_index++] = high_bits & 0xff;\n  _command[_index++] = (high_bits >> 8) & 0xff;\n  _command[_index++] = (high_bits >> 16) & 0xff;\n  _command[_index++] = (high_bits >> 24) & 0xff;     \n  // Return command\n  return _command;\n};"]}