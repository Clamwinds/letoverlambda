{"version":3,"sources":["promise.test.js"],"names":[],"mappings":";AACA,IAAI,OAAO,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,OAAO,CAAA;;AAE5C,QAAQ,CAAC,SAAS,EAAE,YAAY;;AAE9B,IAAE,CAAC,cAAc,EAAE,YAAY;AAC7B,QAAI,CAAC,GAAG,IAAI,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AAClC,UAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;GAC9B,CAAC,CAAC;;AAEH,IAAE,CAAC,eAAe,EAAE,YAAY;AAC9B,QAAI,CAAC,GAAG,IAAI,OAAO,EAAE,CAAA;AACrB,KAAC,CAAC,KAAK,CAAC,YAAU,EAAE,CAAC;;AAAC,AAEtB,UAAM,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;GAC9C,CAAC,CAAC;;AAEH,IAAE,CAAC,iBAAiB,EAAE,YAAY;AAChC,QAAI,CAAC,GAAG,IAAI,OAAO,EAAE,CAAA;AACrB,KAAC,CAAC,OAAO,CAAC,YAAU,EAAE,CAAC;;AAAC,AAExB,UAAM,CAAC,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;GAChD,CAAC,CAAC;;AAEH,IAAE,CAAC,kBAAkB,EAAE,YAAY;AACjC,QAAI,CAAC,GAAG,IAAI,OAAO,EAAE,CAAA;AACrB,KAAC,CAAC,QAAQ,CAAC,YAAU,EAAE,CAAC;;AAAC,AAEzB,UAAM,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAC7C,UAAM,CAAC,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;GAChD,CAAC,CAAC;;AAEH,IAAE,CAAC,cAAc,EAAE,YAAY;AAC7B,QAAI,CAAC,GAAG,IAAI,OAAO,EAAE,CAAA;AACrB,KAAC,CAAC,IAAI,CAAC,YAAU,EAAE,CAAC,CAAC;AACrB,UAAM,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;GAC7C,CAAC,CAAC;;AAEH,IAAE,CAAC,cAAc,EAAE,YAAY;AAC7B,QAAI,CAAC,GAAG,IAAI,OAAO,EAAE;QACjB,QAAQ,GAAG,CAAC,CAAC;;AAEjB,KAAC,CAAC,IAAI,CAAC,YAAW;AAChB,QAAE,QAAQ,CAAC;KACZ,CAAC,CAAC;;AAEH,KAAC,CAAC,OAAO,EAAE,CAAC;;AAEZ,cAAU,CAAC,YAAY;AACrB,YAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KAC3B,EAAE,EAAE,CAAC,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,oBAAoB,EAAE,YAAY;AACnC,QAAI,CAAC,GAAG,IAAI,OAAO,EAAE;QACjB,QAAQ,GAAG,CAAC,CAAC;;AAEjB,KAAC,CAAC,IAAI,CAAC,YAAY;AACjB,QAAE,QAAQ,CAAC;AACX,aAAO,AAAC,IAAI,OAAO,EAAE,CAAE,OAAO,EAAE,CAAC;KAClC,CAAC,CAAC,IAAI,CAAC,YAAY;AAClB,QAAE,QAAQ,CAAC;KACZ,CAAC,CAAC;;AAEH,KAAC,CAAC,OAAO,EAAE,CAAC;;AAEZ,cAAU,CAAC,YAAY;AACrB,YAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KAC3B,EAAE,EAAE,CAAC,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,gBAAgB,EAAE,UAAU,IAAI,EAAE;AACnC,QAAI,CAAC,GAAG,IAAI,OAAO,EAAE,CAAA;AACrB,KAAC,CAAC,KAAK,CAAC,UAAS,GAAG,EAAC;AACnB,YAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AACzB,UAAI,EAAE,CAAC;KACR,CAAC,CAAC;AACH,KAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;GACjB,CAAC,CAAC;;AAEH,IAAE,CAAC,iBAAiB,EAAE,UAAU,IAAI,EAAE;AACpC,QAAI,CAAC,GAAG,IAAI,OAAO,EAAE,CAAA;AACrB,KAAC,CAAC,OAAO,CAAC,UAAS,IAAI,EAAC;AACtB,YAAM,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AAC1B,UAAI,EAAE,CAAC;KACR,CAAC,CAAC;AACH,KAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;GAClB,CAAC,CAAC;;AAEH,IAAE,CAAC,qBAAqB,EAAE,UAAU,IAAI,EAAE;AACxC,QAAI,CAAC,GAAG,IAAI,OAAO,EAAE,CAAA;AACrB,KAAC,CAAC,QAAQ,CAAC,UAAS,GAAG,EAAE,IAAI,EAAC;AAC5B,YAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AACzB,UAAI,EAAE,CAAC;KACR,CAAC,CAAC;AACH,KAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;GAClB,CAAC,CAAC;;AAEH,IAAE,CAAC,sBAAsB,EAAE,UAAU,IAAI,EAAE;AACzC,QAAI,CAAC,GAAG,IAAI,OAAO,EAAE,CAAA;AACrB,KAAC,CAAC,QAAQ,CAAC,UAAS,GAAG,EAAE,IAAI,EAAC;AAC5B,YAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;AAC3B,YAAM,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AAC1B,UAAI,EAAE,CAAC;KACR,CAAC,CAAC;AACH,KAAC,CAAC,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;GACxB,CAAC,CAAC;;AAEH,IAAE,CAAC,sBAAsB,EAAE,UAAU,IAAI,EAAE;AACzC,QAAI,CAAC,GAAG,IAAI,OAAO,EAAE,CAAA;AACrB,KAAC,CAAC,EAAE,CAAC,UAAU,EAAE,UAAS,GAAG,EAAE,IAAI,EAAC;AAClC,YAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AACzB,UAAI,EAAE,CAAC;KACR,CAAC,CAAC;AACH,KAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;GAClB,CAAC,CAAC;;AAEH,IAAE,CAAC,uBAAuB,EAAE,UAAU,IAAI,EAAE;AAC1C,QAAI,CAAC,GAAG,IAAI,OAAO,EAAE,CAAA;AACrB,KAAC,CAAC,EAAE,CAAC,UAAU,EAAE,UAAS,GAAG,EAAE,IAAI,EAAC;AAClC,YAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;AAC3B,YAAM,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AAC1B,UAAI,EAAE,CAAC;KACR,CAAC,CAAC;AACH,KAAC,CAAC,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;GACxB,CAAC,CAAC;CAEJ,CAAC,CAAC","file":"promise.test-compiled.js","sourcesContent":["\nvar Promise = require('../lib/monk').Promise\n\ndescribe('promise', function () {\n\n  it('Promise#type', function () {\n    var p = new Promise(null, 'woot');\n    expect(p.type).to.be('woot');\n  });\n\n  it('Promise#error', function () {\n    var p = new Promise()\n    p.error(function(){});\n    // 2 due to internal event listener\n    expect(p.listeners('error').length).to.be(2);\n  });\n\n  it('Promise#success', function () {\n    var p = new Promise()\n    p.success(function(){});\n    // 2 due to internal event listener\n    expect(p.listeners('success').length).to.be(2);\n  });\n\n  it('Promise#complete', function () {\n    var p = new Promise()\n    p.complete(function(){});\n    // 2 due to internal event listener\n    expect(p.listeners('error').length).to.be(2);\n    expect(p.listeners('success').length).to.be(2);\n  });\n\n  it('Promise#each', function () {\n    var p = new Promise()\n    p.each(function(){});\n    expect(p.listeners('each').length).to.be(1);\n  });\n\n  it('Promise#then', function () {\n    var p = new Promise()\n      , runCount = 0;\n\n    p.then(function() {\n      ++runCount;\n    });\n\n    p.fulfill();\n\n    setTimeout(function () {\n      expect(runCount).to.be(1);\n    }, 10);\n  });\n\n  it('Promise#then-chain', function () {\n    var p = new Promise()\n      , runCount = 0;\n\n    p.then(function () {\n      ++runCount;\n      return (new Promise()).fulfill();\n    }).then(function () {\n      ++runCount;\n    });\n\n    p.fulfill();\n\n    setTimeout(function () {\n      expect(runCount).to.be(2);\n    }, 10);\n  });\n\n  it('Promise#reject', function (done) {\n    var p = new Promise()\n    p.error(function(err){\n      expect(err).to.be('foo');\n      done();\n    });\n    p.reject('foo');\n  });\n\n  it('Promise#fulfill', function (done) {\n    var p = new Promise()\n    p.success(function(data){\n      expect(data).to.be('bar');\n      done();\n    });\n    p.fulfill('bar');\n  });\n\n  it('Promise#resolve-err', function (done) {\n    var p = new Promise()\n    p.complete(function(err, data){\n      expect(err).to.be('foo');\n      done();\n    });\n    p.resolve('foo');\n  });\n\n  it('Promise#resolve-data', function (done) {\n    var p = new Promise()\n    p.complete(function(err, data){\n      expect(err).to.not.be.ok();\n      expect(data).to.be('bar');\n      done();\n    });\n    p.resolve(null, 'bar');\n  });\n\n  it('Promise#complete-err', function (done) {\n    var p = new Promise()\n    p.on('complete', function(err, data){\n      expect(err).to.be('foo');\n      done();\n    });\n    p.resolve('foo');\n  });\n\n  it('Promise#complete-data', function (done) {\n    var p = new Promise()\n    p.on('complete', function(err, data){\n      expect(err).to.not.be.ok();\n      expect(data).to.be('bar');\n      done();\n    });\n    p.resolve(null, 'bar');\n  });\n\n});\n"]}