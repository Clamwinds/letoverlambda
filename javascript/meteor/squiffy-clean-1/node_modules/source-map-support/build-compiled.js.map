{"version":3,"sources":["build.js"],"names":[],"mappings":";;AAEA,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACvB,IAAI,WAAW,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AACzC,IAAI,aAAa,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;;AAE7C,SAAS,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAE;AAC9B,SAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACrB,eAAa,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;CACvC;;;AAAA,AAGD,EAAE,CAAC,aAAa,CAAC,UAAU,EAAE,qDAAqD,CAAC,CAAC;AACpF,GAAG,CAAC,6CAA6C,EAAE,UAAS,KAAK,EAAE,MAAM,EAAE;AACzE,MAAI,KAAK,EAAE,MAAM,KAAK,CAAC;;;AAAA,AAGvB,MAAI,MAAM,GAAG,CACX,IAAI,EACJ,+CAA+C,EAC/C,qDAAqD,EACrD,KAAK,CACN,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACb,MAAI,IAAI,GAAG,CACT,oJAAoJ,EACpJ,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC,OAAO,CAAC,IAAI,MAAM,CAAC,SAAS,GAAG,GAAG,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,EAAE,SAAS,CAAC,EACjH,4BAA4B,CAC7B,CAAC,IAAI,CAAC,IAAI,CAAC;;;AAAC,AAGb,IAAE,CAAC,aAAa,CAAC,UAAU,EAAE,WAAW,CAAC,SAAS,CAAC;AACjD,qBAAiB,EAAE,sBAAsB;AACzC,eAAW,EAAE,eAAe;AAC5B,iBAAa,EAAE,MAAM;AACrB,WAAO,EAAE,IAAI;GACd,CAAC,CAAC,CAAC;AACJ,KAAG,CAAC,iEAAiE,EAAE,UAAS,KAAK,EAAE,MAAM,EAAE;AAC7F,QAAI,KAAK,EAAE,MAAM,KAAK,CAAC;AACvB,QAAI,IAAI,GAAG,MAAM,GAAG,IAAI,GAAG,MAAM,CAAC;AAClC,MAAE,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;AAC1B,MAAE,CAAC,aAAa,CAAC,+BAA+B,EAAE,IAAI,CAAC,CAAC;AACxD,MAAE,CAAC,aAAa,CAAC,wCAAwC,EAAE,IAAI,CAAC,CAAC;GAClE,CAAC,CAAC;CACJ,CAAC;;;AAAC,AAGH,GAAG,CAAC,8EAA8E,EAAE,UAAS,KAAK,EAAE;AAClG,MAAI,KAAK,EAAE,MAAM,KAAK,CAAC;CACxB,CAAC;;;AAAC,AAGH,GAAG,CAAC,qFAAqF,EAAE,UAAS,KAAK,EAAE;AACzG,MAAI,KAAK,EAAE,MAAM,KAAK,CAAC;AACvB,KAAG,CAAC,oGAAoG,EAAE,UAAS,KAAK,EAAE;AACxH,QAAI,KAAK,EAAE,MAAM,KAAK,CAAC;GACxB,CAAC,CAAA;CACH,CAAC;;;AAAC,AAGH,GAAG,CAAC,kFAAkF,EAAE,UAAS,KAAK,EAAE;AACtG,MAAI,KAAK,EAAE,MAAM,KAAK,CAAC;CACxB,CAAC;;;AAAC,AAGH,GAAG,CAAC,iFAAiF,EAAE,UAAS,KAAK,EAAE;AACrG,MAAI,KAAK,EAAE,MAAM,KAAK,CAAC;AACvB,MAAI,QAAQ,GAAG,EAAE,CAAC,YAAY,CAAC,uBAAuB,EAAE,MAAM,CAAC,CAAC;AAChE,IAAE,CAAC,aAAa,CAAC,uBAAuB,EAAE,QAAQ,CAAC,OAAO,CAAC,4BAA4B,EAAE,EAAE,CAAC,CAAC,CAAA;CAC9F,CAAC,CAAC","file":"build-compiled.js","sourcesContent":["#!/usr/bin/env node\n\nvar fs = require('fs');\nvar querystring = require('querystring');\nvar child_process = require('child_process');\n\nfunction run(command, callback) {\n  console.log(command);\n  child_process.exec(command, callback);\n}\n\n// Use browserify to package up source-map-support.js\nfs.writeFileSync('.temp.js', 'sourceMapSupport = require(\"./source-map-support\");');\nrun('node_modules/browserify/bin/cmd.js .temp.js', function(error, stdout) {\n  if (error) throw error;\n\n  // Wrap the code so it works both as a normal <script> module and as an AMD module\n  var header = [\n    '/*',\n    ' * Support for source maps in V8 stack traces',\n    ' * https://github.com/evanw/node-source-map-support',\n    ' */',\n  ].join('\\n');\n  var code = [\n    '(this[\"define\"] || function(name, callback) { this[\"sourceMapSupport\"] = callback(); })(\"browser-source-map-support\", function(sourceMapSupport) {',\n    stdout.replace(/\\bbyte\\b/g, 'bite').replace(new RegExp(__dirname + '/', 'g'), '').replace(/@license/g, 'license'),\n    'return sourceMapSupport});',\n  ].join('\\n');\n\n  // Use the online Google Closure Compiler service for minification\n  fs.writeFileSync('.temp.js', querystring.stringify({\n    compilation_level: 'SIMPLE_OPTIMIZATIONS',\n    output_info: 'compiled_code',\n    output_format: 'text',\n    js_code: code\n  }));\n  run('curl -d @.temp.js \"http://closure-compiler.appspot.com/compile\"', function(error, stdout) {\n    if (error) throw error;\n    var code = header + '\\n' + stdout;\n    fs.unlinkSync('.temp.js');\n    fs.writeFileSync('browser-source-map-support.js', code);\n    fs.writeFileSync('amd-test/browser-source-map-support.js', code);\n  });\n});\n\n// Build the AMD test\nrun('node_modules/coffee-script/bin/coffee --map --compile amd-test/script.coffee', function(error) {\n  if (error) throw error;\n});\n\n// Build the browserify test\nrun('node_modules/coffee-script/bin/coffee --map --compile browserify-test/script.coffee', function(error) {\n  if (error) throw error;\n  run('node_modules/browserify/bin/cmd.js --debug browserify-test/script.js > browserify-test/compiled.js', function(error) {\n    if (error) throw error;\n  })\n});\n\n// Build the browser test\nrun('node_modules/coffee-script/bin/coffee --map --compile browser-test/script.coffee', function(error) {\n  if (error) throw error;\n});\n\n// Build the header test\nrun('node_modules/coffee-script/bin/coffee --map --compile header-test/script.coffee', function(error) {\n  if (error) throw error;\n  var contents = fs.readFileSync('header-test/script.js', 'utf8');\n  fs.writeFileSync('header-test/script.js', contents.replace(/\\/\\/# sourceMappingURL=.*/g, ''))\n});\n"]}