{"version":3,"sources":["base64-vlq.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;MACM,MAAM;MAcN,cAAc;MAGd,QAAQ;MAGR,aAAa;MAGb,oBAAoB;;;;;;;;;;;QAQf,WAAW,GAApB,SAAS,WAAW,CAAC,MAAM,EAAE;AAC3B,aAAO,MAAM,GAAG,CAAC,GACb,CAAC,AAAC,CAAC,MAAM,IAAK,CAAC,CAAA,GAAI,CAAC,GACpB,CAAC,MAAM,IAAI,CAAC,CAAA,GAAI,CAAC,CAAC;KACvB;;;;;;;;;QAQQ,aAAa,GAAtB,SAAS,aAAa,CAAC,MAAM,EAAE;AAC7B,UAAI,UAAU,GAAG,CAAC,MAAM,GAAG,CAAC,CAAA,KAAM,CAAC,CAAC;AACpC,UAAI,OAAO,GAAG,MAAM,IAAI,CAAC,CAAC;AAC1B,aAAO,UAAU,GACb,CAAC,OAAO,GACR,OAAO,CAAC;KACb;;;;;;AAjDG,UAAM,GAAG,OAAO,CAAC,UAAU,CAAC;;;;;;;;;;;;;;AAc5B,kBAAc,GAAG,CAAC;;;;AAGlB,YAAQ,GAAG,CAAC,IAAI,cAAc;;;;AAG9B,iBAAa,GAAG,QAAQ,GAAG,CAAC;;;;AAG5B,wBAAoB,GAAG,QAAQ;AA+BnC,WAAO,CAAC,MAAM,GAAG,SAAS,gBAAgB,CAAC,MAAM,EAAE;AACjD,UAAI,OAAO,GAAG,EAAE,CAAC;AACjB,UAAI,KAAK,CAAC;;AAEV,UAAI,GAAG,GAAG,WAAW,CAAC,MAAM,CAAC,CAAC;;AAE9B,SAAG;AACD,aAAK,GAAG,GAAG,GAAG,aAAa,CAAC;AAC5B,WAAG,MAAM,cAAc,CAAC;AACxB,YAAI,GAAG,GAAG,CAAC,EAAE;;;AAGX,eAAK,IAAI,oBAAoB,CAAC;SAC/B;AACD,eAAO,IAAI,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;OACjC,QAAQ,GAAG,GAAG,CAAC,EAAE;;AAElB,aAAO,OAAO,CAAC;KAChB;;;;;;AAAC,AAMF,WAAO,CAAC,MAAM,GAAG,SAAS,gBAAgB,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE;AAClE,UAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AACzB,UAAI,MAAM,GAAG,CAAC,CAAC;AACf,UAAI,KAAK,GAAG,CAAC,CAAC;AACd,UAAI,YAAY,EAAE,KAAK,CAAC;;AAExB,SAAG;AACD,YAAI,MAAM,IAAI,MAAM,EAAE;AACpB,gBAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;SAC/D;;AAED,aAAK,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;AACjD,YAAI,KAAK,KAAK,CAAC,CAAC,EAAE;AAChB,gBAAM,IAAI,KAAK,CAAC,wBAAwB,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;SACrE;;AAED,oBAAY,GAAG,CAAC,EAAE,KAAK,GAAG,oBAAoB,CAAA,AAAC,CAAC;AAChD,aAAK,IAAI,aAAa,CAAC;AACvB,cAAM,GAAG,MAAM,IAAI,KAAK,IAAI,KAAK,CAAA,AAAC,CAAC;AACnC,aAAK,IAAI,cAAc,CAAC;OACzB,QAAQ,YAAY,EAAE;;AAEvB,eAAS,CAAC,KAAK,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC;AACxC,eAAS,CAAC,IAAI,GAAG,MAAM,CAAC;KACzB,CAAC;;CACH","file":"base64-vlq-compiled.js","sourcesContent":["/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n *\n * Based on the Base 64 VLQ implementation in Closure Compiler:\n * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\n *\n * Copyright 2011 The Closure Compiler Authors. All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *  * Neither the name of Google Inc. nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n{\n  var base64 = require('./base64');\n\n  // A single base 64 digit can contain 6 bits of data. For the base 64 variable\n  // length quantities we use in the source map spec, the first bit is the sign,\n  // the next four bits are the actual value, and the 6th bit is the\n  // continuation bit. The continuation bit tells us whether there are more\n  // digits in this value following this digit.\n  //\n  //   Continuation\n  //   |    Sign\n  //   |    |\n  //   V    V\n  //   101011\n\n  var VLQ_BASE_SHIFT = 5;\n\n  // binary: 100000\n  var VLQ_BASE = 1 << VLQ_BASE_SHIFT;\n\n  // binary: 011111\n  var VLQ_BASE_MASK = VLQ_BASE - 1;\n\n  // binary: 100000\n  var VLQ_CONTINUATION_BIT = VLQ_BASE;\n\n  /**\n   * Converts from a two-complement value to a value where the sign bit is\n   * placed in the least significant bit.  For example, as decimals:\n   *   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\n   *   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\n   */\n  function toVLQSigned(aValue) {\n    return aValue < 0\n      ? ((-aValue) << 1) + 1\n      : (aValue << 1) + 0;\n  }\n\n  /**\n   * Converts to a two-complement value from a value where the sign bit is\n   * placed in the least significant bit.  For example, as decimals:\n   *   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\n   *   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\n   */\n  function fromVLQSigned(aValue) {\n    var isNegative = (aValue & 1) === 1;\n    var shifted = aValue >> 1;\n    return isNegative\n      ? -shifted\n      : shifted;\n  }\n\n  /**\n   * Returns the base 64 VLQ encoded value.\n   */\n  exports.encode = function base64VLQ_encode(aValue) {\n    var encoded = \"\";\n    var digit;\n\n    var vlq = toVLQSigned(aValue);\n\n    do {\n      digit = vlq & VLQ_BASE_MASK;\n      vlq >>>= VLQ_BASE_SHIFT;\n      if (vlq > 0) {\n        // There are still more digits in this value, so we must make sure the\n        // continuation bit is marked.\n        digit |= VLQ_CONTINUATION_BIT;\n      }\n      encoded += base64.encode(digit);\n    } while (vlq > 0);\n\n    return encoded;\n  };\n\n  /**\n   * Decodes the next base 64 VLQ value from the given string and returns the\n   * value and the rest of the string via the out parameter.\n   */\n  exports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\n    var strLen = aStr.length;\n    var result = 0;\n    var shift = 0;\n    var continuation, digit;\n\n    do {\n      if (aIndex >= strLen) {\n        throw new Error(\"Expected more digits in base 64 VLQ value.\");\n      }\n\n      digit = base64.decode(aStr.charCodeAt(aIndex++));\n      if (digit === -1) {\n        throw new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\n      }\n\n      continuation = !!(digit & VLQ_CONTINUATION_BIT);\n      digit &= VLQ_BASE_MASK;\n      result = result + (digit << shift);\n      shift += VLQ_BASE_SHIFT;\n    } while (continuation);\n\n    aOutParam.value = fromVLQSigned(result);\n    aOutParam.rest = aIndex;\n  };\n}\n"]}