{"version":3,"sources":["stringmap.js"],"names":[],"mappings":"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","file":"stringmap-compiled.js","sourcesContent":["// stringmap.js\n// MIT licensed, see LICENSE file\n// Copyright (c) 2013 Olov Lassus <olov.lassus@gmail.com>\n\nvar StringMap = (function() {\n    \"use strict\";\n\n    // to save us a few characters\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    var create = (function() {\n        function hasOwnEnumerableProps(obj) {\n            for (var prop in obj) {\n                if (hasOwnProperty.call(obj, prop)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        // FF <= 3.6:\n        // o = {}; o.hasOwnProperty(\"__proto__\" or \"__count__\" or \"__parent__\") => true\n        // o = {\"__proto__\": null}; Object.prototype.hasOwnProperty.call(o, \"__proto__\" or \"__count__\" or \"__parent__\") => false\n        function hasOwnPollutedProps(obj) {\n            return hasOwnProperty.call(obj, \"__count__\") || hasOwnProperty.call(obj, \"__parent__\");\n        }\n\n        var useObjectCreate = false;\n        if (typeof Object.create === \"function\") {\n            if (!hasOwnEnumerableProps(Object.create(null))) {\n                useObjectCreate = true;\n            }\n        }\n        if (useObjectCreate === false) {\n            if (hasOwnEnumerableProps({})) {\n                throw new Error(\"StringMap environment error 0, please file a bug at https://github.com/olov/stringmap/issues\");\n            }\n        }\n        // no throw yet means we can create objects without own enumerable props (safe-guard against VMs and shims)\n\n        var o = (useObjectCreate ? Object.create(null) : {});\n        var useProtoClear = false;\n        if (hasOwnPollutedProps(o)) {\n            o.__proto__ = null;\n            if (hasOwnEnumerableProps(o) || hasOwnPollutedProps(o)) {\n                throw new Error(\"StringMap environment error 1, please file a bug at https://github.com/olov/stringmap/issues\");\n            }\n            useProtoClear = true;\n        }\n        // no throw yet means we can create objects without own polluted props (safe-guard against VMs and shims)\n\n        return function() {\n            var o = (useObjectCreate ? Object.create(null) : {});\n            if (useProtoClear) {\n                o.__proto__ = null;\n            }\n            return o;\n        };\n    })();\n\n    // stringmap ctor\n    function stringmap(optional_object) {\n        // use with or without new\n        if (!(this instanceof stringmap)) {\n            return new stringmap(optional_object);\n        }\n        this.obj = create();\n        this.hasProto = false; // false (no __proto__ key) or true (has __proto__ key)\n        this.proto = undefined; // value for __proto__ key when hasProto is true, undefined otherwise\n\n        if (optional_object) {\n            this.setMany(optional_object);\n        }\n    };\n\n    // primitive methods that deals with data representation\n    stringmap.prototype.has = function(key) {\n        // The type-check of key in has, get, set and delete is important because otherwise an object\n        // {toString: function() { return \"__proto__\"; }} can avoid the key === \"__proto__\" test.\n        // The alternative to type-checking would be to force string conversion, i.e. key = String(key);\n        if (typeof key !== \"string\") {\n            throw new Error(\"StringMap expected string key\");\n        }\n        return (key === \"__proto__\" ?\n            this.hasProto :\n            hasOwnProperty.call(this.obj, key));\n    };\n\n    stringmap.prototype.get = function(key) {\n        if (typeof key !== \"string\") {\n            throw new Error(\"StringMap expected string key\");\n        }\n        return (key === \"__proto__\" ?\n            this.proto :\n            (hasOwnProperty.call(this.obj, key) ? this.obj[key] : undefined));\n    };\n\n    stringmap.prototype.set = function(key, value) {\n        if (typeof key !== \"string\") {\n            throw new Error(\"StringMap expected string key\");\n        }\n        if (key === \"__proto__\") {\n            this.hasProto = true;\n            this.proto = value;\n        } else {\n            this.obj[key] = value;\n        }\n    };\n\n    stringmap.prototype.remove = function(key) {\n        if (typeof key !== \"string\") {\n            throw new Error(\"StringMap expected string key\");\n        }\n        var didExist = this.has(key);\n        if (key === \"__proto__\") {\n            this.hasProto = false;\n            this.proto = undefined;\n        } else {\n            delete this.obj[key];\n        }\n        return didExist;\n    };\n\n    // alias remove to delete but beware:\n    // sm.delete(\"key\"); // OK in ES5 and later\n    // sm['delete'](\"key\"); // OK in all ES versions\n    // sm.remove(\"key\"); // OK in all ES versions\n    stringmap.prototype['delete'] = stringmap.prototype.remove;\n\n    stringmap.prototype.isEmpty = function() {\n        for (var key in this.obj) {\n            if (hasOwnProperty.call(this.obj, key)) {\n                return false;\n            }\n        }\n        return !this.hasProto;\n    };\n\n    stringmap.prototype.size = function() {\n        var len = 0;\n        for (var key in this.obj) {\n            if (hasOwnProperty.call(this.obj, key)) {\n                ++len;\n            }\n        }\n        return (this.hasProto ? len + 1 : len);\n    };\n\n    stringmap.prototype.keys = function() {\n        var keys = [];\n        for (var key in this.obj) {\n            if (hasOwnProperty.call(this.obj, key)) {\n                keys.push(key);\n            }\n        }\n        if (this.hasProto) {\n            keys.push(\"__proto__\");\n        }\n        return keys;\n    };\n\n    stringmap.prototype.values = function() {\n        var values = [];\n        for (var key in this.obj) {\n            if (hasOwnProperty.call(this.obj, key)) {\n                values.push(this.obj[key]);\n            }\n        }\n        if (this.hasProto) {\n            values.push(this.proto);\n        }\n        return values;\n    };\n\n    stringmap.prototype.items = function() {\n        var items = [];\n        for (var key in this.obj) {\n            if (hasOwnProperty.call(this.obj, key)) {\n                items.push([key, this.obj[key]]);\n            }\n        }\n        if (this.hasProto) {\n            items.push([\"__proto__\", this.proto]);\n        }\n        return items;\n    };\n\n\n    // methods that rely on the above primitives\n    stringmap.prototype.setMany = function(object) {\n        if (object === null || (typeof object !== \"object\" && typeof object !== \"function\")) {\n            throw new Error(\"StringMap expected Object\");\n        }\n        for (var key in object) {\n            if (hasOwnProperty.call(object, key)) {\n                this.set(key, object[key]);\n            }\n        }\n        return this;\n    };\n\n    stringmap.prototype.merge = function(other) {\n        var keys = other.keys();\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            this.set(key, other.get(key));\n        }\n        return this;\n    };\n\n    stringmap.prototype.map = function(fn) {\n        var keys = this.keys();\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            keys[i] = fn(this.get(key), key); // re-use keys array for results\n        }\n        return keys;\n    };\n\n    stringmap.prototype.forEach = function(fn) {\n        var keys = this.keys();\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            fn(this.get(key), key);\n        }\n    };\n\n    stringmap.prototype.clone = function() {\n        var other = stringmap();\n        return other.merge(this);\n    };\n\n    stringmap.prototype.toString = function() {\n        var self = this;\n        return \"{\" + this.keys().map(function(key) {\n            return JSON.stringify(key) + \":\" + JSON.stringify(self.get(key));\n        }).join(\",\") + \"}\";\n    };\n\n    return stringmap;\n})();\n\nif (typeof module !== \"undefined\" && typeof module.exports !== \"undefined\") {\n    module.exports = StringMap;\n}\n"]}