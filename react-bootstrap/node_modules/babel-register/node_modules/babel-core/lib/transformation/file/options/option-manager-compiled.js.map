{"version":3,"sources":["option-manager.js"],"names":[],"mappings":"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","file":"option-manager-compiled.js","sourcesContent":["\"use strict\";\n\nvar _classCallCheck = require(\"babel-runtime/helpers/class-call-check\")[\"default\"];\n\nvar _getIterator = require(\"babel-runtime/core-js/get-iterator\")[\"default\"];\n\nvar _interopRequireWildcard = require(\"babel-runtime/helpers/interop-require-wildcard\")[\"default\"];\n\nvar _interopRequireDefault = require(\"babel-runtime/helpers/interop-require-default\")[\"default\"];\n\nexports.__esModule = true;\n\nvar _apiNode = require(\"../../../api/node\");\n\nvar context = _interopRequireWildcard(_apiNode);\n\nvar _plugin2 = require(\"../../plugin\");\n\nvar _plugin3 = _interopRequireDefault(_plugin2);\n\nvar _babelMessages = require(\"babel-messages\");\n\nvar messages = _interopRequireWildcard(_babelMessages);\n\nvar _index = require(\"./index\");\n\nvar _helpersResolve = require(\"../../../helpers/resolve\");\n\nvar _helpersResolve2 = _interopRequireDefault(_helpersResolve);\n\nvar _json5 = require(\"json5\");\n\nvar _json52 = _interopRequireDefault(_json5);\n\nvar _pathIsAbsolute = require(\"path-is-absolute\");\n\nvar _pathIsAbsolute2 = _interopRequireDefault(_pathIsAbsolute);\n\nvar _pathExists = require(\"path-exists\");\n\nvar _pathExists2 = _interopRequireDefault(_pathExists);\n\nvar _lodashLangCloneDeep = require(\"lodash/lang/cloneDeep\");\n\nvar _lodashLangCloneDeep2 = _interopRequireDefault(_lodashLangCloneDeep);\n\nvar _lodashLangClone = require(\"lodash/lang/clone\");\n\nvar _lodashLangClone2 = _interopRequireDefault(_lodashLangClone);\n\nvar _helpersMerge = require(\"../../../helpers/merge\");\n\nvar _helpersMerge2 = _interopRequireDefault(_helpersMerge);\n\nvar _config = require(\"./config\");\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _path = require(\"path\");\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _fs = require(\"fs\");\n\nvar _fs2 = _interopRequireDefault(_fs);\n\n/*:: import type Logger from \"../logger\";*/\n\nvar existsCache = {};\nvar jsonCache = {};\n\nvar BABELIGNORE_FILENAME = \".babelignore\";\nvar BABELRC_FILENAME = \".babelrc\";\nvar PACKAGE_FILENAME = \"package.json\";\n\nfunction exists(filename) {\n  var cached = existsCache[filename];\n  if (cached == null) {\n    return existsCache[filename] = _pathExists2[\"default\"].sync(filename);\n  } else {\n    return cached;\n  }\n}\n\n/*:: type PluginObject = {\n  pre?: Function;\n  post?: Function;\n  manipulateOptions?: Function;\n\n  visitor: ?{\n    [key: string]: Function | {\n      enter?: Function | Array<Function>;\n      exit?: Function | Array<Function>;\n    }\n  };\n};*/\nvar OptionManager = (function () {\n  function OptionManager(log /*:: ?: Logger*/) {\n    _classCallCheck(this, OptionManager);\n\n    this.resolvedConfigs = [];\n    this.options = OptionManager.createBareOptions();\n    this.log = log;\n  }\n\n  OptionManager.memoisePluginContainer = function memoisePluginContainer(fn, loc, i, alias) {\n    for (var _iterator = (OptionManager.memoisedPlugins /*: Array<Object>*/), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _getIterator(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var cache = _ref;\n\n      if (cache.container === fn) return cache.plugin;\n    }\n\n    var obj /*: ?PluginObject*/ = undefined;\n\n    if (typeof fn === \"function\") {\n      obj = fn(context);\n    } else {\n      obj = fn;\n    }\n\n    if (typeof obj === \"object\") {\n      var _plugin = new _plugin3[\"default\"](obj, alias);\n      OptionManager.memoisedPlugins.push({\n        container: fn,\n        plugin: _plugin\n      });\n      return _plugin;\n    } else {\n      throw new TypeError(messages.get(\"pluginNotObject\", loc, i, typeof obj) + loc + i);\n    }\n  };\n\n  OptionManager.createBareOptions = function createBareOptions() {\n    var opts = {};\n\n    for (var _key in _config2[\"default\"]) {\n      var opt = _config2[\"default\"][_key];\n      opts[_key] = _lodashLangClone2[\"default\"](opt[\"default\"]);\n    }\n\n    return opts;\n  };\n\n  OptionManager.normalisePlugin = function normalisePlugin(plugin, loc, i, alias) {\n    plugin = plugin.__esModule ? plugin[\"default\"] : plugin;\n\n    if (!(plugin instanceof _plugin3[\"default\"])) {\n      // allow plugin containers to be specified so they don't have to manually require\n      if (typeof plugin === \"function\" || typeof plugin === \"object\") {\n        plugin = OptionManager.memoisePluginContainer(plugin, loc, i, alias);\n      } else {\n        throw new TypeError(messages.get(\"pluginNotFunction\", loc, i, typeof plugin));\n      }\n    }\n\n    plugin.init(loc, i);\n\n    return plugin;\n  };\n\n  OptionManager.normalisePlugins = function normalisePlugins(loc, dirname, plugins) {\n    return plugins.map(function (val, i) {\n      var plugin = undefined,\n          options = undefined;\n\n      // destructure plugins\n      if (Array.isArray(val)) {\n        plugin = val[0];\n        options = val[1];\n      } else {\n        plugin = val;\n      }\n\n      var alias = typeof plugin === \"string\" ? plugin : loc + \"$\" + i;\n\n      // allow plugins to be specified as strings\n      if (typeof plugin === \"string\") {\n        var pluginLoc = _helpersResolve2[\"default\"](\"babel-plugin-\" + plugin, dirname) || _helpersResolve2[\"default\"](plugin, dirname);\n        if (pluginLoc) {\n          plugin = require(pluginLoc);\n        } else {\n          throw new ReferenceError(messages.get(\"pluginUnknown\", plugin, loc, i, dirname));\n        }\n      }\n\n      plugin = OptionManager.normalisePlugin(plugin, loc, i, alias);\n\n      return [plugin, options];\n    });\n  };\n\n  OptionManager.prototype.addConfig = function addConfig(loc /*: string*/, key /*:: ?: string*/) /*: boolean*/ {\n    var json = arguments.length <= 2 || arguments[2] === undefined ? _json52[\"default\"] : arguments[2];\n\n    if (this.resolvedConfigs.indexOf(loc) >= 0) {\n      return false;\n    }\n\n    var content = _fs2[\"default\"].readFileSync(loc, \"utf8\");\n    var opts = undefined;\n\n    try {\n      opts = jsonCache[content] = jsonCache[content] || json.parse(content);\n      if (key) opts = opts[key];\n    } catch (err) {\n      err.message = loc + \": Error while parsing JSON - \" + err.message;\n      throw err;\n    }\n\n    this.mergeOptions(opts, loc, null, _path2[\"default\"].dirname(loc));\n    this.resolvedConfigs.push(loc);\n\n    return !!opts;\n  };\n\n  /**\n   * This is called when we want to merge the input `opts` into our\n   * base options.\n   *\n   *  - `alias` is used to output pretty traces back to the original source.\n   *  - `loc` is used to point to the original config.\n   *  - `dirname` is used to resolve plugins relative to it.\n   */\n\n  OptionManager.prototype.mergeOptions = function mergeOptions(rawOpts /*:: ?: Object*/, alias /*: string*/, loc /*:: ?: string*/, dirname /*:: ?: string*/) {\n    if (alias === undefined) alias = \"foreign\";\n\n    if (!rawOpts) return;\n\n    //\n    if (typeof rawOpts !== \"object\" || Array.isArray(rawOpts)) {\n      this.log.error(\"Invalid options type for \" + alias, TypeError);\n    }\n\n    //\n    var opts = _lodashLangCloneDeep2[\"default\"](rawOpts, function (val) {\n      if (val instanceof _plugin3[\"default\"]) {\n        return val;\n      }\n    });\n\n    //\n    dirname = dirname || process.cwd();\n    loc = loc || alias;\n\n    for (var _key2 in opts) {\n      var option = _config2[\"default\"][_key2];\n\n      // check for an unknown option\n      if (!option && this.log) {\n        this.log.error(\"Unknown option: \" + alias + \".\" + _key2, ReferenceError);\n      }\n    }\n\n    // normalise options\n    _index.normaliseOptions(opts);\n\n    // resolve plugins\n    if (opts.plugins) {\n      opts.plugins = OptionManager.normalisePlugins(loc, dirname, opts.plugins);\n    }\n\n    // add extends clause\n    if (opts[\"extends\"]) {\n      var extendsLoc = _helpersResolve2[\"default\"](opts[\"extends\"], dirname);\n      if (extendsLoc) {\n        this.addConfig(extendsLoc);\n      } else {\n        if (this.log) this.log.error(\"Couldn't resolve extends clause of \" + opts[\"extends\"] + \" in \" + alias);\n      }\n      delete opts[\"extends\"];\n    }\n\n    // resolve presets\n    if (opts.presets) {\n      this.mergePresets(opts.presets, dirname);\n      delete opts.presets;\n    }\n\n    // env\n    var envOpts = undefined;\n    var envKey = process.env.BABEL_ENV || process.env.NODE_ENV || \"development\";\n    if (opts.env) {\n      envOpts = opts.env[envKey];\n      delete opts.env;\n    }\n\n    // merge them into this current files options\n    _helpersMerge2[\"default\"](this.options, opts);\n\n    // merge in env options\n    this.mergeOptions(envOpts, alias + \".env.\" + envKey, null, dirname);\n  };\n\n  OptionManager.prototype.mergePresets = function mergePresets(presets /*: Array<string | Object>*/, dirname /*: string*/) {\n    for (var _iterator2 = presets, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _getIterator(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var val = _ref2;\n\n      if (typeof val === \"string\") {\n        var presetLoc = _helpersResolve2[\"default\"](\"babel-preset-\" + val, dirname) || _helpersResolve2[\"default\"](val, dirname);\n        if (presetLoc) {\n          var presetOpts = require(presetLoc);\n          this.mergeOptions(presetOpts, presetLoc, presetLoc, _path2[\"default\"].dirname(presetLoc));\n        } else {\n          throw new Error(\"Couldn't find preset \" + JSON.stringify(val) + \" relative to directory \" + JSON.stringify(dirname));\n        }\n      } else if (typeof val === \"object\") {\n        this.mergeOptions(val);\n      } else {\n        throw new Error(\"todo\");\n      }\n    }\n  };\n\n  OptionManager.prototype.addIgnoreConfig = function addIgnoreConfig(loc) {\n    var file = _fs2[\"default\"].readFileSync(loc, \"utf8\");\n    var lines = file.split(\"\\n\");\n\n    lines = lines.map(function (line) {\n      return line.replace(/#(.*?)$/, \"\").trim();\n    }).filter(function (line) {\n      return !!line;\n    });\n\n    this.mergeOptions({ ignore: lines }, loc);\n  };\n\n  OptionManager.prototype.findConfigs = function findConfigs(loc) {\n    if (!loc) return;\n\n    if (!_pathIsAbsolute2[\"default\"](loc)) {\n      loc = _path2[\"default\"].join(process.cwd(), loc);\n    }\n\n    var foundConfig = false;\n    var foundIgnore = false;\n\n    while (loc !== (loc = _path2[\"default\"].dirname(loc))) {\n      if (!foundConfig) {\n        var configLoc = _path2[\"default\"].join(loc, BABELRC_FILENAME);\n        if (exists(configLoc)) {\n          this.addConfig(configLoc);\n          foundConfig = true;\n        }\n\n        var pkgLoc = _path2[\"default\"].join(loc, PACKAGE_FILENAME);\n        if (!foundConfig && exists(pkgLoc)) {\n          foundConfig = this.addConfig(pkgLoc, \"babel\", JSON);\n        }\n      }\n\n      if (!foundIgnore) {\n        var ignoreLoc = _path2[\"default\"].join(loc, BABELIGNORE_FILENAME);\n        if (exists(ignoreLoc)) {\n          this.addIgnoreConfig(ignoreLoc);\n          foundIgnore = true;\n        }\n      }\n\n      if (foundIgnore && foundConfig) return;\n    }\n  };\n\n  OptionManager.prototype.normaliseOptions = function normaliseOptions() {\n    var opts = this.options;\n\n    for (var _key3 in _config2[\"default\"]) {\n      var option = _config2[\"default\"][_key3];\n      var val = opts[_key3];\n\n      // optional\n      if (!val && option.optional) continue;\n\n      // aliases\n      if (option.alias) {\n        opts[option.alias] = opts[option.alias] || val;\n      } else {\n        opts[_key3] = val;\n      }\n    }\n  };\n\n  OptionManager.prototype.init = function init() /*: Object*/ {\n    var opts /*: Object*/ = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var filename = opts.filename;\n\n    // resolve all .babelrc files\n    if (opts.babelrc !== false) {\n      this.findConfigs(filename);\n    }\n\n    // merge in base options\n    this.mergeOptions(opts, \"base\", null, filename && _path2[\"default\"].dirname(filename));\n\n    // normalise\n    this.normaliseOptions(opts);\n\n    return this.options;\n  };\n\n  return OptionManager;\n})();\n\nexports[\"default\"] = OptionManager;\n\nOptionManager.memoisedPlugins = [];\nmodule.exports = exports[\"default\"];"]}